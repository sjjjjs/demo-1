{"version":3,"sources":["component/MessageFlow/message.module.css","component/MessageFlow/box.module.css","app.module.css","component/MessageTool/index.module.css","component/MessageFlow/box.js","util/index.js","constant/index.js","component/MessageFlow/message.js","component/MessageFlow/defaultAvatarImage.jpg","component/MessageFlow/index.js","component/MessageTool/index.js","App.js","reportWebVitals.js","index.js"],"names":["module","exports","Box","props","autoScroll","imageLoadedCount","outerEle","useRef","count","React","Children","children","useEffect","ele","current","scrollTop","scrollHeight","clientHeight","maxScrollTop","isNaN","ref","className","styles","outer","inner","EmptyContent","emptyBox","classnames","cls","join","uniq","i","noop","randomPick","arr","len","length","Math","floor","random","WAYS","WAY_SEND","WAY_RECEIVE","TYPES","DIRECTIONS","Message","type","way","InvalidMessage","TextMessage","ImageMessage","SystemMessage","UnsupportMessage","BaseAvatarMessage","avatarUrl","direction","wayToDirection","baseMessageBox","baseMessageLtr","baseMessageRtl","src","baseAvatarMessageBoxImage","alt","baseMessageBoxContent","text","textMessageBox","textMessageContent","textMessageContentSent","textMessageContentReceive","imageUrl","onAsyncUpdate","imageMessageBox","imageMessageContent","onLoad","imageMessageImg","systemMessageBox","systemMessageText","MessageFlow","messages","useState","setImageLoadedCount","map","message","r","id","texts","images","systemTexts","avatarUrls","ways","Object","values","MessageTool","onMessage","box","onClick","generateMessage","primary","App","setMessages","messageBox","actionBox","m","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.a74083dd.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"systemMessageBox\":\"message_systemMessageBox__3jGk5\",\"systemMessageText\":\"message_systemMessageText__1KDGM\",\"baseMessageBox\":\"message_baseMessageBox__2sh-Z\",\"baseMessageLtr\":\"message_baseMessageLtr__14nhU\",\"baseMessageRtl\":\"message_baseMessageRtl__1xaOj\",\"baseAvatarMessageBoxImage\":\"message_baseAvatarMessageBoxImage__id-n_\",\"textMessageBox\":\"message_textMessageBox__i-3gg\",\"textMessageContent\":\"message_textMessageContent__1CkGf\",\"textMessageContentReceive\":\"message_textMessageContentReceive__3p3rN\",\"textMessageContentSent\":\"message_textMessageContentSent__1PU9L\",\"imageMessageBox\":\"message_imageMessageBox__13z5Y\",\"imageMessageContent\":\"message_imageMessageContent__3SQg2\",\"imageMessageImg\":\"message_imageMessageImg__2SnKZ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"outer\":\"box_outer__309CU\",\"inner\":\"box_inner__D_3B5\",\"emptyBox\":\"box_emptyBox__2ovto\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"box\":\"app_box__1cB35\",\"messageBox\":\"app_messageBox__gf3hb\",\"actionBox\":\"app_actionBox__qwD3q\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"box\":\"MessageTool_box__1EEQh\",\"primary\":\"MessageTool_primary__2PCdB\"};","import React, { useEffect, useRef } from 'react';\nimport styles from './box.module.css';\n\n/**\n * 消息容器: 消息列表更新时，内容滑动到最底部\n * @param {object} props\n * @param {boolean|number} props.autoScroll\n *  - true: 自动滚动\n *  - false: 禁止自动滚动\n *  - Number: 距离底部小于某值时自动滚动\n */\nexport default function Box(props) {\n    const autoScroll = props.autoScroll || false;\n    const imageLoadedCount = props.imageLoadedCount || 0;\n    const outerEle = useRef();\n    const count = React.Children.count(props.children);\n    \n    useEffect(() => {\n        if (outerEle && autoScroll !== false) {\n            const ele = outerEle.current;\n            const scrollTop = ele.scrollTop;\n            const scrollHeight = ele.scrollHeight;\n            const clientHeight = ele.clientHeight;\n            const maxScrollTop = scrollHeight - clientHeight;\n\n            if (\n                clientHeight < scrollHeight\n                && scrollTop < maxScrollTop\n            ) {\n                if (\n                    autoScroll === true\n                    || (\n                        typeof autoScroll === 'number'\n                        && !isNaN(autoScroll)\n                        && (maxScrollTop - scrollTop < autoScroll)\n                    )\n                ) {\n                    ele.scrollTop = maxScrollTop;\n                }\n            }\n        }\n    }, [ count, autoScroll, imageLoadedCount ] );\n\n    return (\n        <div ref={outerEle} className={styles.outer}>\n            <div className={styles.inner}>\n                { count > 0 ? props.children : <EmptyContent /> }\n            </div>\n        </div>\n    );\n}\n\nfunction EmptyContent() {\n    return (\n        <p className={styles.emptyBox}>暂时没有新消息</p>\n    );\n}","\nexport const classnames = (cls = []) => {\n    return cls.join(' ');\n}\n\nexport const uniq = (function(){\n    let i = 0;\n    return () => i++;\n})();\n\nexport const noop = () => false;\n\nexport const randomPick = (arr = []) =>  {\n    const len = arr.length;\n    if (len <= 0) return null;\n    return arr[Math.floor(Math.random()*len)];\n}","\n\nexport const WAYS = {\n    WAY_SEND: 'send',\n    WAY_RECEIVE: 'receive'\n};\n\nexport const TYPES = {\n    TYPE_TEXT: 'text',\n    TYPE_IMAGE: 'image',\n    TYPE_SYSTEM: 'system'\n};\n\nexport const DIRECTIONS = {\n    DIRECTION_LTR: 'ltr',\n    DIRECTION_RTL: 'rtl'\n};","import React from 'react';\nimport styles from './message.module.css';\nimport defaultAvatarImage from './defaultAvatarImage.jpg';\nimport { classnames, noop } from '../../util/index';\nimport { TYPES, WAYS, DIRECTIONS } from '../../constant/index';\n\n// 通过 type 将数据传递给指定消息组件渲染\nexport default function Message(props) {\n    const { type, way } = props;\n    if (\n        way !== WAYS.WAY_SEND\n        && way !== WAYS.WAY_RECEIVE\n    ) return <InvalidMessage />;\n    switch(type) {\n        case TYPES.TYPE_TEXT: return <TextMessage {...props} />;\n        case TYPES.TYPE_IMAGE: return <ImageMessage {...props} />;\n        case TYPES.TYPE_SYSTEM: return <SystemMessage {...props} />;\n        default: return <UnsupportMessage />;\n    }\n}\n\n// 抽象可复用消息组件布局\nfunction BaseAvatarMessage(props) {\n    const { way, avatarUrl = defaultAvatarImage } = props;\n    const direction = BaseAvatarMessage.wayToDirection(way);\n    return (\n        <div className={\n                classnames([\n                    styles.baseMessageBox,\n                    direction === DIRECTIONS.DIRECTION_LTR\n                        ? styles.baseMessageLtr \n                        : styles.baseMessageRtl\n                ])\n            }>\n            <img\n                src={avatarUrl}\n                className={styles.baseAvatarMessageBoxImage}\n                alt=\"avatar\"\n            />\n            <div className={styles.baseMessageBoxContent}>\n                {props.children}\n            </div>\n        </div>\n    );\n}\nBaseAvatarMessage.wayToDirection = way => {\n    switch (way) {\n        case WAYS.WAY_SEND: return DIRECTIONS.DIRECTION_RTL;\n        case WAYS.WAY_RECEIVE: return DIRECTIONS.DIRECTION_LTR;\n        default: return DIRECTIONS.DIRECTION_RTL;\n    }\n}\n\n// 文本消息\nfunction TextMessage(props) {\n    const { avatarUrl, text, way } = props;\n    if (!text) return <InvalidMessage />;\n    return (\n        <BaseAvatarMessage way={way} avatarUrl={avatarUrl}>\n            <div className={styles.textMessageBox}>\n                <div className={\n                    classnames([\n                        styles.textMessageContent,\n                        way === WAYS.WAY_SEND\n                            ? styles.textMessageContentSent\n                            : styles.textMessageContentReceive\n                    ])\n                }>{text}</div>\n            </div>\n        </BaseAvatarMessage>\n    );\n}\n\n// 图片消息\nfunction ImageMessage(props) {\n    const { avatarUrl, imageUrl, way, onAsyncUpdate = noop } = props;\n    if (!imageUrl) return <InvalidMessage />;\n    return (\n        <BaseAvatarMessage way={way} avatarUrl={avatarUrl}>\n            <div className={styles.imageMessageBox}>\n                <div className={styles.imageMessageContent}>\n                    <img onLoad={onAsyncUpdate} className={styles.imageMessageImg} src={imageUrl} alt=\"img\" />\n                </div>\n            </div>\n        </BaseAvatarMessage>\n    );\n}\n\n// 系统消息\nfunction SystemMessage(props) {\n    const { text } = props;\n    if (!text) return <InvalidMessage />;\n    return (\n        <div className={styles.systemMessageBox}>\n            <div className={styles.systemMessageText}>{text}</div>\n        </div>\n    );\n}\n\n// 不支持的消息\nfunction UnsupportMessage() {\n    return (\n        <SystemMessage text=\"不支持的消息\" />\n    );\n}\n\n// 错误的消息\nfunction InvalidMessage() {\n    return (\n        <SystemMessage text={\"无效的消息\"} />\n    );\n}","export default \"data:image/jpeg;base64,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\"","import React, { useState } from 'react';\nimport Box from './box';\nimport Message from './message';\n\nexport default function MessageFlow(props) {\n    const { messages = [], autoScroll = true } = props;\n    const [ imageLoadedCount, setImageLoadedCount ] = useState(0);\n    return (\n        <Box autoScroll={autoScroll} imageLoadedCount={imageLoadedCount}>\n            {\n                messages.map(\n                    message =>\n                        <Message\n                            onAsyncUpdate={() => setImageLoadedCount(r =>r+ 1)} \n                            key={message.id}\n                            {...message}\n                        />\n                )\n            }\n        </Box>\n    );\n}","import React from 'react';\nimport styles from './index.module.css';\nimport { noop, uniq, randomPick } from '../../util/index';\nimport { WAYS, TYPES } from '../../constant/index';\n\nconst texts = [\n    `生命，一次又一次轻薄过\n\n轻狂不知疲倦\n\n——题记`,\n    '我听见回声，来自山谷和心间',\n    '以寂寞的镰刀收割空旷的灵魂',\n    '不断地重复决绝，又重复幸福',\n    '终有绿洲摇曳在沙漠',\n    '我相信自己',\n    '生来如同璀璨的夏日之花',\n    '不凋不败，妖冶如火',\n    '承受心跳的负荷和呼吸的累赘',\n    '乐此不疲',\n    `I heard the echo, from the valleys and the heart\n\nOpen to the lonely soul of sickle harvesting\n\nRepeat outrightly, but also repeat the well-being of\n\nEventually swaying in the desert oasis\n\nI believe I am\n\nBorn as the bright summer flowers\n\nDo not withered undefeated fiery demon rule\n\nHeart rate and breathing to bear the load of the cumbersome\n\nBored`\n];\nconst images = [\n    'https://ss0.bdstatic.com/70cFuHSh_Q1YnxGkpoWK1HF6hhy/it/u=3138065748,4073873552&fm=26&gp=0.jpg',\n    'https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1604492553186&di=14f0f7b4c2ec6c8209052d286d12a19c&imgtype=0&src=http%3A%2F%2Fimg.mp.itc.cn%2Fupload%2F20161222%2Fce3dcbe2adbe45dcbb52c296bf6da118_th.jpg',\n    'https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1604492553186&di=3c76f324aa21be2d5174e1a0182ab411&imgtype=0&src=http%3A%2F%2Fphoto.jdmama.com%2Fforum%2F201407%2F01%2F173718yqqfafyrqes6znsy.jpg',\n    'https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1604492553185&di=b0019f928a5a26756d4e23aaa84c6990&imgtype=0&src=http%3A%2F%2Fupload.iu178.com%2F10009%2Fimage%2F2017%2F03%2F15%2F1489543334164956.jpg',\n    'https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1604492553185&di=d3d537ea734c339bdae8780177823c63&imgtype=0&src=http%3A%2F%2F5b0988e595225.cdn.sohucs.com%2Fimages%2F20180108%2F431f3cc061064ca9af2f0272134ca79c.jpeg',\n    'https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1604492553184&di=bb65de5a288b09483eef39caca0ee157&imgtype=0&src=http%3A%2F%2F5b0988e595225.cdn.sohucs.com%2Fimages%2F20190627%2Ff68f2edf51454e45a81f7d48f1249e92.jpeg',\n    'https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1604492553184&di=16d5f85a01bf1ec565eb721f35bb2494&imgtype=0&src=http%3A%2F%2Fimg.pconline.com.cn%2Fimages%2Fupload%2Fupc%2Ftx%2Fitbbs%2F1310%2F24%2Fc22%2F27913511_1382610828833.jpg',\n    'https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1604492553183&di=d5e5795c23ad816e7d7f37c10431116e&imgtype=0&src=http%3A%2F%2F5b0988e595225.cdn.sohucs.com%2Fimages%2F20170929%2F32cb315855014a1e8db3e9ef1bcda281.jpeg',\n    'https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1604492553183&di=195ac64ffd275556c6057eed646b87be&imgtype=0&src=http%3A%2F%2Fimg.mp.itc.cn%2Fupload%2F20160926%2Fc8f1e0ec279f43178033f80c0df9dad5_th.jpeg'\n];\nconst systemTexts = [\n    '系统错误',\n    '1100 已经到达磁带的物理尽头',\n    '1101 磁带访问到文件标记',\n    '1102 到达磁带或分区首部',\n    '1103 磁带访问到文件组的末尾',\n    '1104 磁带上没有其他数据',\n    '1105 磁带无法分区',\n    '1106 访问多重卷分区的新磁带时，当前的区块大小不正确',\n    '1107 加载磁带时，找不到磁带分区信息',\n    '1108 无法锁定媒体退出功能',\n    '1109 无法卸载媒体',\n    '1110 驱动器中的媒体已经更改',\n    '1111 已经复位I/O 总线',\n    '1112 驱动器中没有媒体',\n];\nconst avatarUrls = [\n    'https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1604493092361&di=5cd0c62199c1ba3b979aa9dc72dd11e8&imgtype=0&src=http%3A%2F%2Fb-ssl.duitang.com%2Fuploads%2Fitem%2F201809%2F01%2F20180901190625_wmpeq.thumb.700_0.jpeg',\n    'https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1604493092360&di=58d23193daede2bb817aac3d37bfca26&imgtype=0&src=http%3A%2F%2Fb-ssl.duitang.com%2Fuploads%2Fitem%2F201509%2F16%2F20150916235818_HVAk2.jpeg',\n    'https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1604493092360&di=ecc8f2469422fb02ea26a912c70e99a5&imgtype=0&src=http%3A%2F%2Fcdn.duitang.com%2Fuploads%2Fitem%2F201408%2F30%2F20140830180834_XuWYJ.png',\n    'https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1604493092360&di=5e63f1ad7a1d6385f5cfd7d3b4e74f9a&imgtype=0&src=http%3A%2F%2Fb-ssl.duitang.com%2Fuploads%2Fitem%2F201409%2F11%2F20140911211243_3rT4u.jpeg',\n    'https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1604493092359&di=6a9390190ce03d88d5560d37c72dbb40&imgtype=0&src=http%3A%2F%2Fn.sinaimg.cn%2Fsinacn19%2F0%2Fw400h400%2F20180910%2F3391-hiycyfw5413589.jpg',\n    'https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1604493147602&di=c1287c5171d3e5d62c9f4b2466a3ea96&imgtype=0&src=http%3A%2F%2Fb-ssl.duitang.com%2Fuploads%2Fitem%2F201808%2F09%2F20180809143413_bcyoy.jpg',\n    'https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1604493092359&di=f4055e008ea97b8964e10721eba10685&imgtype=0&src=http%3A%2F%2Fc-ssl.duitang.com%2Fuploads%2Fitem%2F202006%2F15%2F20200615144625_WQAcx.thumb.400_0.jpeg',\n    'https://ss0.bdstatic.com/70cFuHSh_Q1YnxGkpoWK1HF6hhy/it/u=2057588226,2402156864&fm=11&gp=0.jpg',\n    'https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1604493092358&di=7d764cf9d5dcf41d5bb8cfecb1bd0890&imgtype=0&src=http%3A%2F%2Fc-ssl.duitang.com%2Fuploads%2Fitem%2F202006%2F22%2F20200622133909_rftue.thumb.400_0.jpeg',\n    'https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1604493092358&di=dd72344886077af6a7ac6679fdf56f19&imgtype=0&src=http%3A%2F%2Fb.hiphotos.baidu.com%2Fzhidao%2Fwh%253D450%252C600%2Fsign%3Da587b23df11f3a295a9dddcaac159007%2F500fd9f9d72a60590cfef2f92934349b023bba62.jpg',\n    'https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1604493092358&di=80e8ab2f304fb100b82b3d94b3e310fe&imgtype=0&src=http%3A%2F%2Fc-ssl.duitang.com%2Fuploads%2Fitem%2F201911%2F03%2F20191103115047_LXnKu.thumb.400_0.jpeg',\n    'https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1604493092358&di=6f840ea18f137611e173b719c735abdf&imgtype=0&src=http%3A%2F%2Fc-ssl.duitang.com%2Fuploads%2Fitem%2F202004%2F10%2F20200410180317_ujnix.thumb.400_0.jpeg',\n    'https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1604493092357&di=b327664d07ccc98dc4b6e8a3611dcaad&imgtype=0&src=http%3A%2F%2Fc-ssl.duitang.com%2Fuploads%2Fblog%2F202008%2F08%2F20200808142612_nsopf.thumb.400_0.jpeg',\n    'https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1604493092357&di=ec72ec13f289581332c61d888f875270&imgtype=0&src=http%3A%2F%2Fww3.sinaimg.cn%2Fmw690%2F861756fcly1ge2vw0avchj20k00k046p.jpg',\n    'https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1604493092357&di=bed9b1c759193d79d5449b516383983b&imgtype=0&src=http%3A%2F%2Fc-ssl.duitang.com%2Fuploads%2Fitem%2F202005%2F11%2F20200511141839_NUsHG.thumb.400_0.jpeg',\n    'https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1604493210545&di=d727519b8c884263677cf464022588aa&imgtype=0&src=http%3A%2F%2Fimgsrc.baidu.com%2Fforum%2Fw%3D580%2Fsign%3D192ab888f01f4134e0370576151e95c1%2F51da81cb39dbb6fded52c04d0424ab18972b374b.jpg'\n];\nconst ways = Object.values(WAYS);\n\nexport default function MessageTool(props) {\n    const { onMessage = noop } = props;\n    return (\n        <div className={styles.box}>\n            <p>\n                <button onClick={\n                    () => onMessage(generateMessage(1))\n                }>\n                    随机生成一个文本消息\n                </button>\n            </p>\n            <p>\n                <button onClick={\n                    () => onMessage(generateMessage(2))\n                }>\n                    随机生成一个图片消息\n                </button>\n            </p>\n            <p>\n                <button onClick={\n                    () => onMessage(generateMessage(3))\n                }>\n                    随机生成一个系统消息\n                </button>\n            </p>\n            <p>\n                <button className={styles.primary} onClick={\n                    () => onMessage(generateMessage(randomPick([1,2,3])))\n                }>\n                    随机生成一个随机类型消息\n                </button>\n            </p>\n        </div>\n    );\n}\n\nfunction generateMessage(type) {\n    switch(type) {\n        case 1: // text\n            return {\n                id: uniq(),\n                type: TYPES.TYPE_TEXT,\n                way: randomPick(ways),\n                text: randomPick(texts),\n                avatarUrl: randomPick(avatarUrls)\n            };\n        case 2: // image\n            return {\n                id: uniq(),\n                type: TYPES.TYPE_IMAGE,\n                way: randomPick(ways),\n                imageUrl: randomPick(images),\n                avatarUrl: randomPick(avatarUrls)\n            };\n        case 3: // system\n            return {\n                id: uniq(),\n                type: TYPES.TYPE_SYSTEM,\n                way: WAYS.WAY_RECEIVE,\n                text: randomPick(systemTexts)\n            };\n        default:\n            return {\n                id: uniq(),\n                type: TYPES.TYPE_SYSTEM,\n                text: `<${type}> 不是支持的消息类型`\n            };\n    }\n}\n\n","import { useState } from 'react';\nimport MessageFlow from './component/MessageFlow/index';\nimport MessageTool from './component/MessageTool/index';\nimport styles from './app.module.css';\n\nfunction App() {\n  const [messages, setMessages] = useState([]);\n  const appendMessage = m => setMessages(r => [...r, m]);\n  return (\n    <div className={styles.box}>\n        <div className={styles.messageBox}>\n          <MessageFlow messages={messages} autoScroll={true} />\n        </div>\n        <div className={styles.actionBox}>\n          <MessageTool onMessage={appendMessage} />\n        </div>\n    </div>\n  );\n}\n\nexport default App;","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}